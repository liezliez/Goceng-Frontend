<section id="hero" class="hero-section d-flex align-items-center position-relative overflow-hidden text-white" style="min-height: 100vh;">
  <div class="container position-relative z-2" data-aos="fade-up">
    <div class="row justify-content-between align-items-center">

      <!-- Hero Left -->
      <div class="col-lg-6 text-center text-lg-start" data-aos="fade-right" data-aos-delay="100">
        <div class="d-flex align-items-center justify-content-center justify-content-lg-start mb-4">
          <img src="../../../assets/dashtrap/images/logo/Logo shadow.png" alt="Goceng Logo" style="height: 270px;" />
          <h1 class="display-4 fw-bold mb-0 ms-3 text-white">
            Pinjem dulu <span class="text-warning">#Goceng</span>
          </h1>
        </div>
        <p class="lead mb-4 text-light">
          Dapatkan pinjaman tunai cair tanpa ribet. Proses digital, aman, dan transparan.
        </p>
        <ul class="list-unstyled fs-6 mb-4">
          <li><i class="bi bi-check-circle-fill text-warning me-2"></i>Tanpa keluar rumah</li>
          <li><i class="bi bi-check-circle-fill text-warning me-2"></i>Bunga ringan, tanpa biaya tersembunyi</li>
          <li><i class="bi bi-check-circle-fill text-warning me-2"></i>Tenor fleksibel & data aman</li>
        </ul>
        <div class="d-flex flex-wrap gap-2 mt-3">
          <a routerLink="" class="btn btn-warning btn-lg shadow" data-aos="zoom-in" data-aos-delay="200">
            <i class="bi bi-download me-2"></i>Download Aplikasi
          </a>
          <button class="btn btn-outline-light btn-lg shadow" (click)="scrollToSimulator()" data-aos="zoom-in" data-aos-delay="300">
            <i class="bi bi-arrow-down-circle me-2"></i>Lihat Simulasi
          </button>
        </div>
      </div>

      <!-- Hero Right -->
      <div class="col-lg-5" data-aos="fade-left" data-aos-delay="200">
        <div class="bg-white text-dark shadow-lg rounded-4 p-4 p-lg-5" data-aos="zoom-in">
          <h2 class="fw-semibold text-success text-center mb-4">
            <i class="bi bi-bar-chart-line-fill me-2"></i>Statistik Penggunaan
          </h2>
          <div class="text-center text-muted mb-4">
            <p><strong>Total Pinjaman:</strong> {{ stats.totalLoanDisbursed }}</p>
            <p><strong>Unduhan Aplikasi:</strong> {{ stats.appDownloads }}</p>
          </div>

          <h3 class="h5 fw-semibold text-primary text-center mb-3">
            <i class="bi bi-cash-stack me-2"></i>Pilihan Pinjaman
          </h3>
          <div class="d-flex overflow-auto gap-3 mb-4">
            <div *ngFor="let option of loanOptions.slice(0,2); let i = index" class="flex-shrink-0" style="min-width: 200px;">
              <div class="card border-0 shadow-sm rounded-3 p-3 text-center h-100" data-aos="fade-up" [attr.data-aos-delay]="100 + (i * 100)">
                <h6 class="mb-1">{{ option.amount }}</h6>
                <small class="text-muted">{{ option.duration }}</small>
                <div class="mt-3">
                  <button class="btn btn-sm btn-outline-primary w-100" data-bs-toggle="modal" [attr.data-bs-target]="'#loanModal' + i">
                    Detail
                  </button>
                </div>
              </div>
            </div>
          </div>

          <h3 class="h5 fw-semibold text-warning text-center mb-3">
            <i class="bi bi-chat-left-quote-fill me-2"></i>Testimoni
          </h3>
          <div id="testimonialCarouselMini" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
            <div class="carousel-inner text-center px-3">
              <div *ngFor="let t of testimonials; let i = index" class="carousel-item" [class.active]="i === 0">
                <h6>{{ t.name }} <small class="text-muted">({{ t.age }} th)</small></h6>
                <p class="text-muted fst-italic">“{{ t.message }}”</p>
                <small class="text-muted">Jumlah: {{ t.amount }}</small>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Background image -->
  <div class="hero-bg">
    <img src="../../../assets/images/slider-left-dec.png" alt="Background" class="position-absolute top-0 start-0 w-100 h-100 object-fit-cover" />
    <img src="../../../assets/images/regular-table-top.png" alt="Top Decoration" class="position-absolute top-0 start-0" style="width: 25%; z-index: 1;" data-aos="fade-down" />
  </div>
</section>

<!-- Loan Simulator -->
<section id="loanSimulatorSection" class="py-4 bg-light">
  <div class="container" data-aos="fade-up">
    <div class="mx-auto" style="max-width: 600px;">
      <h3 class="h5 fw-semibold text-primary text-center mb-3">
        <i class="bi bi-calculator me-2"></i>Simulasi Pinjaman
      </h3>

      <div class="d-flex justify-content-center flex-wrap gap-2 mb-2" data-aos="zoom-in">
        <button *ngFor="let plafon of plafonTypes"
                class="btn btn-sm"
                [ngClass]="selectedPlafon === plafon ? 'btn-primary' : 'btn-outline-primary'"
                (click)="selectPlafon(plafon)">
          {{ plafon }}
        </button>
      </div>

      <div class="mb-2" data-aos="fade-right">
        <label for="loanAmount" class="form-label text-dark fw-semibold mb-1">Jumlah Pinjaman (Rp)</label>
        <input type="number"
               id="loanAmount"
               class="form-control form-control-sm"
               [(ngModel)]="loanAmount"
               (ngModelChange)="simulateLoan()"
               min="100000"
               placeholder="Contoh: 500000" />
      </div>

      <div class="mb-3" data-aos="fade-left">
        <label for="loanTenor" class="form-label text-dark fw-semibold mb-1">Tenor (bulan)</label>
        <select id="loanTenor"
                class="form-select form-select-sm"
                [(ngModel)]="loanTenor"
                (ngModelChange)="simulateLoan()">
          <option *ngFor="let t of tenorOptions" [ngValue]="t">{{ t }}</option>
        </select>
      </div>

      <div *ngIf="simulationResult.total > 0" class="bg-white rounded-3 px-3 py-2 shadow-sm" data-aos="fade-up">
        <p class="mb-1"><strong>Bunga:</strong> Rp.{{ simulationResult.interest | number:'1.0-0' }}</p>
        <p class="mb-1"><strong>Pokok:</strong> Rp.{{ simulationResult.principal | number:'1.0-0' }}</p>
        <p class="mb-1"><strong>Total:</strong> Rp.{{ simulationResult.total | number:'1.0-0' }}</p>
        <p class="mb-1"><strong>Cicilan:</strong> Rp.{{ simulationResult.installment | number:'1.0-0' }}</p>
      </div>
    </div>
  </div>
</section>


<!-- Loan Modals -->
<ng-container *ngFor="let option of loanOptions; let i = index">
  <div class="modal fade" [id]="'loanModal' + i" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content rounded-4">
        <div class="modal-header">
          <h5 class="modal-title">Detail Pinjaman</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p><strong>Jumlah:</strong> {{ option.amount }}</p>
          <p><strong>Durasi:</strong> {{ option.duration }}</p>
          <p class="text-muted">Ajukan pinjaman sesuai kebutuhan Anda.</p>
        </div>
      </div>
    </div>
  </div>
</ng-container>

<!-- Footer -->
<footer class="text-center mt-5 text-muted small" data-aos="fade-up">
  <p>© {{ currentYear }} Goceng. Aplikasi pinjaman terpercaya — Pinjem dulu #Goceng.</p>
</footer>
