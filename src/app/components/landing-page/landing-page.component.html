<div class="container-fluid py-5 bg-light min-vh-100 d-flex align-items-center">
  <div class="container">
    <div class="row align-items-center justify-content-between">

      <!-- Left Section: Welcome -->
      <div class="col-lg-6 mb-5 mb-lg-0 text-center text-lg-start">
        <div class="d-flex align-items-center justify-content-center justify-content-lg-start mb-4">
          <img src="../assets/dashtrap/images/Logoku.png" alt="Goceng Logo" style="height: 130px;" />
          <h1 class="display-4 fw-bold mb-0 ms-3">
            Pinjem dulu <span class="text-primary">#Goceng</span>
          </h1>
        </div>
        <p class="fs-5 text-muted mb-3">
          Dapatkan pinjaman tunai langsung cair tanpa ribet, dengan bunga ringan dan tenor fleksibel. Proses aplikasi aman, transparan, dan sepenuhnya digital. Cukup beberapa langkah, dana siap di tanganmu!
        </p>
        <ul class="list-unstyled fs-6 text-muted mb-4" style="max-width: 480px;">
          <li>✔️ Proses cepat tanpa harus keluar rumah</li>
          <li>✔️ Bunga ringan & tanpa biaya tersembunyi</li>
          <li>✔️ Tenor fleksibel sesuai kemampuanmu</li>
          <li>✔️ Data dijaga aman dengan standar keamanan tinggi</li>
        </ul>
        <div class="mt-4">
          <a routerLink="" class="btn btn-primary btn-lg shadow-sm me-2">
            <i class="bi bi-download me-2"></i>Download Aplikasinya Sekarang
          </a>
          <button class="btn btn-secondary btn-lg shadow-sm" (click)="scrollToSimulator()">
            <i class="bi bi-arrow-down-circle me-2"></i>Lihat Simulasi Pinjaman
          </button>
        </div>
      </div>

      <!-- Right Section: Card with Stats and Features -->
      <div class="col-lg-5">
        <div class="p-4 p-lg-5 bg-white shadow rounded-4">

          <h2 class="mb-3 fw-semibold text-center text-success">
            <i class="bi bi-bar-chart-line-fill me-2"></i>Statistik Penggunaan
          </h2>
          <div class="text-center text-muted mb-4">
            <p class="fs-6 mb-2"><strong>Total Pinjaman Disalurkan:</strong> {{ stats.totalLoanDisbursed }}</p>
            <p class="fs-6"><strong>Jumlah Unduhan Aplikasi:</strong> {{ stats.appDownloads }}</p>
          </div>

          <h3 class="h5 fw-semibold text-center text-primary mt-4 mb-3">
            <i class="bi bi-cash-stack me-2"></i>Pilihan Pinjaman
          </h3>
          <div class="d-flex flex-row overflow-auto gap-3 mb-3">
            <div *ngFor="let option of loanOptions.slice(0,2); let i = index" class="flex-shrink-0" style="min-width: 200px;">
              <div class="border rounded-3 p-3 text-center shadow-sm h-100">
                <h6 class="mb-1">{{ option.amount }}</h6>
                <small class="text-muted">{{ option.duration }}</small>
                <div class="mt-2">
                  <button class="btn btn-sm btn-outline-primary w-100"
                          data-bs-toggle="modal" [attr.data-bs-target]="'#loanModal' + i">
                    Detail
                  </button>
                </div>
              </div>
            </div>
          </div>

          <h3 class="h5 fw-semibold text-center text-warning mt-4 mb-3">
            <i class="bi bi-chat-left-quote-fill me-2"></i>Testimoni Pengguna
          </h3>
          <div id="testimonialCarouselMini" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
            <div class="carousel-inner text-center px-3">
              <div *ngFor="let t of testimonials; let i = index"
                   class="carousel-item"
                   [class.active]="i === 0">
                <h6 class="mb-1">{{ t.name }} <small class="text-muted">({{ t.age }} th)</small></h6>
                <p class="text-muted fst-italic small mb-1">“{{ t.message }}”</p>
                <small class="text-muted">Jumlah: {{ t.amount }}</small>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Loan Simulator -->
    <div class="row justify-content-center mt-5" id="loanSimulatorSection">
      <div class="col-lg-8">
        <div class="p-4 bg-white shadow rounded-4">

          <h3 class="h5 fw-semibold text-center text-primary mb-3">
            <i class="bi bi-calculator me-2"></i>Simulasi Pinjaman
          </h3>

          <div class="d-flex justify-content-center mb-3">
            <div *ngFor="let plafon of plafonTypes" class="me-3">
              <button class="btn"
                      [ngClass]="selectedPlafon === plafon ? 'btn-primary' : 'btn-outline-primary'"
                      (click)="selectPlafon(plafon)">
                {{ plafon }}
              </button>
            </div>
          </div>

          <div class="mb-3">
            <label for="loanAmount" class="form-label">Jumlah Pinjaman (Rp):</label>
            <input type="number"
                   id="loanAmount"
                   class="form-control"
                   [(ngModel)]="loanAmount"
                   (ngModelChange)="simulateLoan()"
                   min="100000" />
          </div>

          <div class="mb-3">
            <label for="loanTenor" class="form-label">Tenor (bulan):</label>
            <select id="loanTenor"
                    class="form-select"
                    [(ngModel)]="loanTenor"
                    (ngModelChange)="simulateLoan()">
              <option *ngFor="let t of tenorOptions" [ngValue]="t">{{ t }}</option>
            </select>
          </div>

          <div *ngIf="simulationResult.total > 0" class="border rounded-3 p-3 bg-light">
            <p><strong>Bunga:</strong> Rp {{ simulationResult.interest | number:'1.0-0' }}</p>
            <p><strong>Pokok:</strong> Rp {{ simulationResult.principal | number:'1.0-0' }}</p>
            <p><strong>Total Pinjaman:</strong> Rp {{ simulationResult.total | number:'1.0-0' }}</p>
            <p><strong>Cicilan Per Bulan:</strong> Rp {{ simulationResult.installment | number:'1.0-0' }}</p>
          </div>

        </div>
      </div>
    </div>

    <!-- Loan Detail Modals -->
    <ng-container *ngFor="let option of loanOptions; let i = index">
      <div class="modal fade" [id]="'loanModal' + i" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content rounded-4">
            <div class="modal-header">
              <h5 class="modal-title">Detail Pinjaman</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <p><strong>Jumlah Pinjaman:</strong> {{ option.amount }}</p>
              <p><strong>Durasi:</strong> {{ option.duration }}</p>
              <p class="text-muted">
                Ajukan pinjaman sesuai kebutuhan Anda secara cepat dan aman.
              </p>
            </div>
          </div>
        </div>
      </div>
    </ng-container>

  </div>
</div>

<footer class="text-center mt-5 text-muted small">
  <p>© {{ currentYear }} Goceng. Aplikasi pinjaman terpercaya — Pinjem dulu #Goceng.</p>
</footer>
